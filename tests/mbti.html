<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MBTI 빠른 테스트 - 몽실몽실</title>

  <!-- AdSense (head 필수, 1회) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5160457410437424" crossorigin="anonymous"></script>

  <!-- Pretendard -->
  <link href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.css" rel="stylesheet">

  <!-- 공통 스타일 -->
  <link rel="stylesheet" href="../css/style.css?v=2025.2">
  <!-- 질문 레이아웃 V2 -->
  <link rel="stylesheet" href="../css/layout.question.v2.css?v=2025.3">

  <!-- MBTI 전용 보조 스타일 (필요하면 style.css로 옮겨도 됨) -->
  <style>
    /* 강도 선택 카드 */
    .mode-card-title {
      font-weight: 800;
      margin-bottom: 10px;
    }
    .mode-select-note {
      margin-top: 10px;
      font-size: 0.9rem;
      color: var(--text-soft, #5e5e5e);
    }
    .mode-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .mode-option {
      width: 100%;
      text-align: left;
      border-radius: 16px;
      padding: 14px 16px;
      border: 1px solid var(--line, #5e493d22);
      background: #fffdf7;
      box-shadow: 0 3px 10px rgba(0,0,0,.04);
      cursor: pointer;
      transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
    }
    .mode-option:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(0,0,0,.06);
    }
    .mode-option .mode-label {
      font-weight: 800;
      margin-bottom: 4px;
    }
    .mode-option .mode-desc {
      font-size: 0.9rem;
      color: var(--text-soft, #5e5e5e);
    }
    .mode-option[data-mode="light"] {
      background: #fff5dc;
    }
    .mode-option[data-mode="normal"] {
      background: #cfe9ff;
    }
    .mode-option[data-mode="deep"] {
      background: #f4eeff;
    }

    /* 상단 미니 모드 스위처 */
    .mode-mini {
      display: flex;
      gap: 6px;
      margin-left: 8px;
    }
    .mode-pill {
      border-radius: 999px;
      border: 1px solid var(--line, #5e493d33);
      background: #ffffff;
      padding: 4px 8px;
      font-size: 0.75rem;
      font-weight: 700;
      color: var(--text-soft, #5e5e5e);
      cursor: pointer;
      white-space: nowrap;
    }
    .mode-pill.active {
      background: #ffe6a8;
      border-color: #ffcf60;
      color: #5e493d;
    }

    /* 모드 안내 문구 */
    #modeNote {
      margin-top: 10px;
      font-size: 0.85rem;
      color: var(--text-soft, #5e5e5e);
    }

    /* MBTI 결과 그래프 (양쪽 비율) */
    .state-meter.mbti-meter {
      margin-top: 12px;
    }
    .mbti-meter .axis-row {
      margin-bottom: 10px;
    }
    .mbti-meter .axis-header {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      font-size: 0.9rem;
    }
    .mbti-meter .axis-label {
      color: var(--text-soft, #5e5e5e);
    }
    .mbti-meter .axis-diff {
      opacity: .9;
    }
    .mbti-meter .axis-bar {
      position: relative;
      margin-top: 4px;
      height: 10px;
      border-radius: 999px;
      background: #eef3f2;
      overflow: hidden;
    }
    .mbti-meter .axis-fill {
      position: absolute;
      top: 0;
      bottom: 0;
    }
    .mbti-meter .axis-fill-a {
      left: 0;
      background: var(--mint-300, #a5e3c5);
    }
    .mbti-meter .axis-fill-b {
      right: 0;
      background: var(--sky-300, #a8d6ff);
    }

    .result-section {
      margin-top: 10px;
      font-size: 0.95rem;
    }
    .result-section b {
      display: inline-block;
      margin-bottom: 4px;
    }
  </style>
</head>

<body>
  <!-- 상단 고정 메인 버튼 -->
  <a class="top-main-btn" href="../index.html" aria-label="메인으로">
    <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M3 10.5L12 3l9 7.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-9.5z" fill="currentColor"/>
    </svg>
    <span>메인으로</span>
  </a>

  <header>
    <div class="logo">
      <img src="../assets/mbti.png" alt="MBTI 테스트"
           onerror="this.onerror=null; this.src='../assets/mongsil.png'">
      <span>MBTI 빠른 테스트</span>
    </div>
    <p class="subtitle">라이트 8문항 · 보통 12문항 · 심화 24문항 중 선택</p>
  </header>

  <main class="test">
    <!-- 1단계: 강도 선택 카드 -->
    <section class="card-q fun" id="modeCard">
      <p class="q-text mode-card-title">먼저 이번에 해볼 MBTI 검사 강도를 골라주세요.</p>
      <div class="mode-list">
        <button type="button" class="mode-option" data-mode="light">
          <div class="mode-label">라이트 · 8문항</div>
          <div class="mode-desc">가볍게 경향만 보고 싶을 때, 2~3분 만에 끝나는 버전이에요.</div>
        </button>
        <button type="button" class="mode-option" data-mode="normal">
          <div class="mode-label">보통 · 12문항</div>
          <div class="mode-desc">균형형 · 대부분의 사용자에게 추천하는 표준 버전입니다.</div>
        </button>
        <button type="button" class="mode-option" data-mode="deep">
          <div class="mode-label">심화 · 24문항</div>
          <div class="mode-desc">축별 미세한 차이까지 보고 싶을 때, 여유 있을 때 추천해요.</div>
        </button>
      </div>
      <p class="mode-select-note">* 검사 버전은 언제든 다시 선택해서 처음부터 다시 시작할 수 있어요.</p>
    </section>

    <!-- 2단계: 실제 문항 영역 (강도 선택 후 노출) -->
    <div id="testWrap" style="display:none">
      <div class="meta">
        <div id="stepLabel">1 / 12</div>
        <div class="bar" aria-label="진행률"><span id="barFill"></span></div>
        <div class="mode-mini" id="modeMini">
          <button type="button" class="mode-pill" data-mode="light">라이트</button>
          <button type="button" class="mode-pill" data-mode="normal">보통</button>
          <button type="button" class="mode-pill" data-mode="deep">심화</button>
        </div>
      </div>

      <!-- 질문 카드 -->
      <section class="card-q fun" id="card">
        <p class="q-text" id="qText">질문 로딩 중…</p>
        <div class="choices" id="choiceWrap"></div>
        <div class="navs">
          <button id="prev" class="start ghost" type="button" aria-label="이전">← 이전</button>
          <button id="skip" class="start ghost" type="button" aria-label="건너뛰기">건너뛰기</button>
        </div>
        <p class="note" id="modeNote">
          * 현재: <b>보통</b>(12문항, 표준형) 기준 문항입니다. 자기보고식 경향 파악 도구이며, 임상 진단이 아닙니다.
        </p>
      </section>

      <!-- 결과 -->
      <section id="result" style="display:none"></section>
    </div>
  </main>

  <footer>© 2025 몽실몽실 심리연구소 ☁️</footer>

  <!-- 안정화 스크립트 -->
  <script src="../js/error-proof.js?v=2025.2" defer></script>
  <!-- 테스트 로직 -->
  <script src="../js/mbti.js?v=2025.3" defer></script>
</body>
</html>
