<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>관계 경계 점검 - 몽실몽실</title>

  <!-- AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5160457410437424" crossorigin="anonymous"></script>

  <!-- Pretendard -->
  <link href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.css" rel="stylesheet">

  <!-- 공통 스타일 -->
  <link rel="stylesheet" href="../css/style.css?v=2025.4">
  <style>
    /* 페이지 로컬 보조 (필요 최소) */
    :root{--bg:#fffaf4;--line:#e3d5c7;--ink:#5e493d;--soft:#8a7a6a;--card:#fffdfa;--shadow:0 2px 10px rgba(0,0,0,.05)}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:"Pretendard Variable",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}
    main.test-layout{max-width:980px;margin:0 auto;padding:84px 12px 72px}
    .top-main-btn{position:fixed;top:10px;left:12px;z-index:40;display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border:1px solid var(--ink);border-radius:999px;background:#fff;box-shadow:var(--shadow);color:var(--ink);text-decoration:none;font-weight:700}
    .hero-wrap .logo{display:flex;gap:12px;align-items:center;margin-bottom:10px}
    .hero-wrap .logo img{width:44px;height:44px;object-fit:contain}
    .hero-wrap .subtitle{color:var(--soft)}
    .test-card{background:#fff;border:1px solid var(--line);border-radius:18px;padding:14px;box-shadow:var(--shadow);margin:10px 0}
    .progress-row{display:flex;align-items:center;gap:10px}
    .progress-row > span{color:#8a7a6a}
    .progressbar{flex:1;height:8px;border-radius:999px;background:#efe9e1;overflow:hidden}
    .progressbar>div{height:100%;width:0%;background:#cfdce8;transition:width .3s ease}
    .test-q{font-size:1.02rem;line-height:1.6;margin:12px 0}
    .choices{display:grid;gap:8px}
    .choice{display:flex;align-items:center;justify-content:space-between;gap:8px;background:#fff;border:1px solid #e9e6e2;border-radius:14px;padding:10px 12px}
    .choice button{border:none;border-radius:999px;padding:6px 10px;background:#f6f2eb;color:#5e493d;cursor:pointer}
    .choice small{color:#8a7a6a}
    .notice{font-size:.86rem;color:#6b5b50;background:#f1f6ff;border:1px dashed #bcd3ff;border-radius:12px;padding:10px;margin:10px 0}
    .result-wrap{display:none;margin:16px 0 10px;padding:12px 14px;border:1px solid var(--line);border-radius:18px;background:#fffefb;box-shadow:var(--shadow)}
    .result-badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:#fff;border:1px solid var(--line);font-weight:700;color:#5e493d;font-size:.9rem}
    .result-gauge{margin-top:10px;height:12px;border-radius:999px;background:#f1e8dd;overflow:hidden;position:relative}
    .result-gauge .fill{position:absolute;top:0;left:0;height:100%;width:0%;background:linear-gradient(90deg,#69d27a,#ffd34f 50%,#ff7a7a);transition:width .5s ease}
    .result-quote{margin:10px 0 6px;font-style:italic;color:#6a5a4f}
    .result-desc{color:#6b5b50;line-height:1.7}
    .result-pills{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .result-pill{padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:#faf7f1;font-size:.8rem;color:#6b5b50;white-space:nowrap}
    .result-actions{display:flex;gap:8px;margin-top:12px}
    .result-actions .btn{border:none;border-radius:999px;padding:8px 14px;cursor:pointer;background:#f3e6d9;color:#5e493d;font-weight:600}
    @media (min-width:1024px){main.test-layout{max-width:1100px}}
  </style>
</head>
<body class="v2025-4 test-page relation-boundary">
  <!-- 상단 고정 메인 버튼 -->
  <a class="top-main-btn" href="../index.html" aria-label="메인으로">
    <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M3 10.5L12 3l9 7.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1z"
        fill="none" stroke="#5e493d" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <span>메인</span>
  </a>

  <main class="test-layout" id="app">
    <header class="hero-wrap">
      <div class="logo">
        <img src="../assets/relationship.png" alt="관계 테스트" onerror="this.onerror=null; this.src='../assets/weather/weather_rainy.png'">
        <div>
          <span>관계의 모든 것</span>
          <p class="subtitle">특정 <strong>한 사람</strong>을 떠올리고 응답하세요. 내 감정·판단·경계를 얼마나 지키는지 점검합니다.</p>
        </div>
      </div>
    </header>

    <p class="notice">5지선다(0~4) + 응답시간 가중치(±20%) 보조 반영. 확률이 높을수록 <strong>경계가 흔들릴 가능성</strong>이 큽니다.</p>

    <section class="test-card">
      <div class="progress-row">
        <span>문항 <b id="qNow">1</b> / 15</span>
        <div class="progressbar" aria-hidden="true"><div id="pg" style="width:0%"></div></div>
      </div>

      <h2 class="test-q" id="qText">질문 로딩 중…</h2>
      <div class="choices" id="choices"></div>
    </section>

    <section class="result-wrap" id="result">
      <div class="result-badge">관계 경계 점검 — <span id="label">안정</span> (<span id="percent">0</span>%)</div>
      <div class="result-gauge"><div class="fill" id="fill"></div></div>
      <p class="result-quote" id="quote">“내 감정은 증거입니다. 경계는 나를 지키는 방식이에요.”</p>
      <p class="result-desc" id="desc"></p>

      <div class="result-pills" id="pills"></div>

      <div class="result-actions">
        <button class="btn" onclick="location.href='../index.html'">메인으로</button>
        <button class="btn" onclick="location.reload()">다시 하기</button>
      </div>
    </section>
  </main>

  <!-- 안정성 스크립트 -->
  <script src="../js/error-proof.js?v=2025.2" defer></script>
  <!-- 테스트 로직 -->
  <script src="../js/relationship_boundary.js?v=2025.1" defer></script>
</body>
</html>
